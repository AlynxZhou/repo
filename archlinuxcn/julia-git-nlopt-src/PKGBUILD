pkgname=julia-git-nlopt-src
pkgver=1.2.1
_commit=18561f75f4510869c6f51e02152928dfdcd61e3f
pkgrel=1
pkgdesc="NLopt.jl"
url="https://github.com/JuliaOpt/NLopt.jl.git"
arch=('any')
license=('MIT')
makedepends=(git julia-pkg-scripts)
depends=(julia-git)
source=("git+https://github.com/JuliaOpt/NLopt.jl.git#commit=$_commit")
sha256sums=('d4c572e010c876a0035f6efb62b48f9b67d6f5e697508d8ee7a487cfea8b4972')

package() {
  cd NLopt.jl

  sed -i -e 's/    global Optimizer/    @eval global Optimizer/' src/NLopt.jl

  JULIA_INSTALL_SRCPKG=1 . /usr/lib/julia/julia-install-pkg.sh NLopt "${pkgdir}" "${pkgname}" julia-git
}
